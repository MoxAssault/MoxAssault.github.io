function addYMLFieldInput(field,grid){const inputId="modal-input-"+field.name;if(field.type==="bool"){const input=document.createElement("input");input.type="checkbox";input.className="modal-input modal-input-bool";input.id=inputId;input.name=field.name;input.style.width="18px";input.style.height="18px";input.style.margin="0 5px 0 0";const boolWrap=document.createElement("div");boolWrap.style.display="flex";boolWrap.style.alignItems="center";const label=document.createElement("label");label.className="modal-field-label tight";label.textContent=field.name;label.setAttribute("for",input.id);boolWrap.appendChild(input);boolWrap.appendChild(label);grid.appendChild(boolWrap);return}let input;if(field.type==="array"){input=document.createElement("textarea");input.className="modal-input modal-input-array";input.rows=2;input.placeholder=" ";input.id=inputId;input.name=field.name}else if(field.type==="int"){input=document.createElement("input");input.type="number";input.className="modal-input modal-input-int";input.id=inputId;input.name=field.name;input.placeholder=" "}else if(field.type==="str"&&field.multiline){input=document.createElement("textarea");input.className="modal-input modal-input-multiline";input.rows=2;input.id=inputId;input.name=field.name;input.placeholder=" "}else{input=document.createElement("input");input.type="text";input.className="modal-input";input.id=inputId;input.name=field.name;input.placeholder=" "}const group=document.createElement("div");group.className="floating-label-group";group.appendChild(input);const floating=document.createElement("label");floating.className="floating-label";floating.htmlFor=input.id;floating.textContent=field.name;group.appendChild(floating);grid.appendChild(group)}function showModal(fields,onSubmit){const overlay=document.getElementById("modalOverlay");const fieldsDiv=document.getElementById("modalFields");fieldsDiv.innerHTML="";const grid=document.createElement("div");grid.className="modal-fields-grid";fields.forEach((field=>addYMLFieldInput(field,grid)));fieldsDiv.appendChild(grid);overlay.style.display="flex";document.getElementById("modalClose").onclick=()=>{overlay.style.display="none"};overlay.onclick=evt=>{if(evt.target===overlay)overlay.style.display="none"};const modalForm=document.getElementById("modalForm");modalForm.onsubmit=evt=>{evt.preventDefault();let result={};grid.querySelectorAll("[name]").forEach((el=>{const name=el.name;let val;if(el.type==="checkbox"){val=el.checked?true:false}else if(el.type==="number"){val=el.value.trim();if(val!=="")val=parseInt(val);else val=undefined}else if(el.classList.contains("modal-input-array")){val=el.value.trim();if(val){val=val.split("\n").map((v=>v.trim())).filter(Boolean)}else{val=[]}}else{val=el.value}result[name]=val}));onSubmit(result);overlay.style.display="none"}}window.addYMLFieldInput=addYMLFieldInput;window.showModal=showModal;