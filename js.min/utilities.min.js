document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("click",(function(e){if(e.target&&e.target.id==="compileBtn"){document.querySelector(".modalOverlay").style.display="flex";const tableId=document.getElementById("idInput").value.trim();const tableName=document.getElementById("tableName").textContent.trim();const tableManu=document.getElementById("manuBox").textContent.trim();const tableInfo=tableName+" - "+tableManu;document.querySelector('.modalContainer input[name="tableVPSId"]').value=tableId;document.querySelector(".modalContainer #modalHeader").textContent=tableInfo;const catToModalInput={tableFiles:"vpxVPSId",b2sFiles:"backglassVPSId",romFiles:"romVPSId",altColorFiles:"coloredROMVPSId",pupPackFiles:"pupVPSId"};Object.entries(catToModalInput).forEach((([catKey,modalInputName])=>{const select=document.querySelector(`#categoryGrid .category-container[data-group="${catKey}"] select`);const modalInput=document.querySelector(`.modalContainer input[name="${modalInputName}"]`);if(select&&modalInput){modalInput.value=select.value&&select.selectedIndex>0?select.value:""}}));if(window.romUpdate)window.romUpdate();if(window.b2sUpdate)window.b2sUpdate();if(window.colorRomUpdate)window.colorRomUpdate();if(window.pupUpdate)window.pupUpdate()}}));document.querySelector(".modalOverlay").addEventListener("click",(function(e){if(e.target===this)this.style.display="none"}));document.getElementById("submitYmlBtn").addEventListener("click",(function(){alert("Submit YML clicked!");document.querySelector(".modalOverlay").style.display="none"}));document.getElementById("clearYmlBtn").addEventListener("click",(function(){clearAllFields();document.querySelector(".modalOverlay").style.display="none"}));document.querySelectorAll('.modalContainer input[type="checkbox"][name$="Override_check"]').forEach((checkbox=>{const cbName=checkbox.name.replace(/_check$/,"");const textInput=checkbox.closest(".lowerOverrideRow, .tableNameOverride").querySelector(`input[name="${cbName}"]`);if(!textInput)return;textInput.disabled=!checkbox.checked;checkbox.addEventListener("change",(function(){textInput.disabled=!this.checked;if(!this.checked)textInput.value=""}))}));document.getElementById("helpBtn").addEventListener("click",(function(){document.getElementById("helpModalOverlay").style.display="flex"}));document.getElementById("closeHelpBtn").addEventListener("click",(function(){document.getElementById("helpModalOverlay").style.display="none"}));document.getElementById("helpModalOverlay").addEventListener("click",(function(e){if(e.target===this)this.style.display="none"}))}));function isNumSize(evt,lmt){var charCode=evt.which?evt.which:evt.keyCode;if(charCode>31&&(charCode<48||charCode>57))return false;if(evt.target.value.length>=lmt)return false;return true}function clearAllFields(){document.querySelectorAll(".modalContainer input, .modalContainer textarea").forEach((el=>{if(el.type==="checkbox"){el.checked=false}else{el.value=""}if(el.name.endsWith("_check")){const textInput=el.closest(".lowerOverrideRow, .tableNameOverride").querySelector(`input[name="${el.name.replace(/_check$/,"")}"]`);if(textInput)textInput.disabled=true}}))}function setSectionFieldsWithBundle(vpsIdInputName,bundleCheckboxName,sectionClass){const vpsInput=document.querySelector(`.modalContainer input[name="${vpsIdInputName}"]`);const bundleCheck=document.querySelector(`.modalContainer input[name="${bundleCheckboxName}"]`);const section=document.querySelector(`.${sectionClass}`);if(!vpsInput||!bundleCheck||!section)return;function update(){const hasVps=!!vpsInput.value.trim();const isBundled=bundleCheck.checked;section.querySelectorAll("input, textarea").forEach((el=>{if(el===bundleCheck){el.disabled=false;return}if(hasVps){if(el.name.endsWith("Override"))return;el.disabled=false;return}if(!hasVps&&isBundled){if(el.name.endsWith("Override"))return;el.disabled=el===vpsInput;return}el.disabled=true}))}bundleCheck.addEventListener("change",update);if(vpsInput)vpsInput.addEventListener("input",update);update();return update}